FROM node:12.18.3

# gastby develop defaults to 8000
ENV PORT=3000
ENV GATSBY_API_HOST=localhost
RUN mkdir -p /usr/src/app

WORKDIR /usr/src/app
COPY . .

RUN npm install
RUN npm install -g gatsby-cli

RUN npm run-script build

EXPOSE 3000
CMD ["gatsby", "develop", "-H", "0.0.0.0"]